import{B as g,a as w,b as E,getMetadata as S}from"../../scripts/aem.min.js";import{c as o,w as A,r as _}from"../../scripts/scripts.min.js";import{loadFragment as x}from"../fragment/fragment.min.js";import{moveToParent as h}from"../../scripts/utils.min.js";const u=window.matchMedia(g),L=window.matchMedia(w),q=window.matchMedia(E),k="nav-wrapper__9mGgO",N="nav__cR6AU",T="main-nav__v8gSB",$="hamburger__IASsl",H="utility__JrnIj",M="brand__1dAvJ",O="dropdown__XugFx",P="tools__rwt1m",W="indications__F7cv9",n={navWrapper:k,nav:N,mainNav:T,hamburger:$,utility:H,brand:M,dropdown:O,tools:P,indications:W},v=()=>{document.querySelectorAll(`.${n.dropdown}[aria-expanded="true"]`).forEach(e=>{e.setAttribute("aria-expanded","false")})},B=()=>{let e=window.screenY+100;window.addEventListener("scroll",()=>{const t=window.scrollY,a=document.querySelector(`.${n.indications}`),r=document.querySelector(`.${n.navWrapper}`);e>t||t<=150?(r.style.removeProperty("height"),r.classList.remove("hide")):(r.style.height=`${r.clientHeight-a.clientHeight}px`,r.classList.add("hide")),e=t})},I=e=>{const t=e.target,a=t.getAttribute("aria-expanded")==="true",r=e.type==="click"?a?"false":"true":e.type==="pointerenter"||e.type==="focus"?"true":e.type==="pointerleave"?"false":t.getAttribute("aria-expanded");e.type==="click"&&v(),t.setAttribute("aria-expanded",r)},K=e=>{document.querySelector(`.${n.nav}`).contains(e.target)||v()},R=e=>{e.key==="Escape"&&v()},Y=e=>{const t=o("nav",{class:n.nav},e),a=[...e.children];[n.utility,n.brand,n.mainNav,n.tools,n.indications].forEach((s,c)=>{const l=a[c];l&&l.classList.add(s)}),_(t.querySelector("main"));const d=o("div",{class:n.hamburger},[o("button",{"aria-label":"Open Navigation"},o("span",{class:"hamburger-icon"}))]);t.append(d),t.setAttribute("aria-expanded","false"),d.addEventListener("click",()=>{const s=t.getAttribute("aria-expanded")==="true";t.setAttribute("aria-expanded",s?"false":"true"),s?document.querySelector("body").style.overflowY="initial":document.querySelector("body").style.overflowY="hidden"});const i=t.querySelector(`.${n.mainNav}`);return i&&i.querySelectorAll(":scope > .default-content-wrapper ul > li").forEach(s=>{const c=s.querySelector("ul");if(c){s.classList.add(n.dropdown),s.setAttribute("aria-expanded","false"),s.setAttribute("tabindex",0),(u.matches?["pointerenter","focus","pointerleave"]:["click"]).forEach(y=>{s.addEventListener(y,I)});const m=c.querySelectorAll("a:last-of-type"),f=m.length-1,p=m[f];p&&p.addEventListener("blur",()=>{p.closest(`.${n.dropdown}`).setAttribute("aria-expanded","false")})}}),document.addEventListener("click",K),document.addEventListener("keydown",R),t},C=e=>{const t=e.querySelector(`.${n.utility}`),a=e.querySelector(`.${n.indications}`);h(t,"prepend"),h(a,"append")},b=()=>{const e=document.querySelector(`.${n.navWrapper}`),t=e.clientHeight;e.closest("header").style.height=`${t}px`,u.matches&&(document.querySelector("body").style.overflowY="initial")},D=async()=>{const e=S("nav"),t=e?new URL(e).pathname:"/nav";return x(t)};async function U(e){const t=await D(),a=Y(t),r=o("div",{class:n.navWrapper});r.append(a),C(a),A(a),e.append(r),B(),b(),[u,q,L].forEach(i=>i.addEventListener("change",b))}export{U as default};
