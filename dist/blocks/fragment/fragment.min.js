import{decorateMain as c}from"../../scripts/scripts.min.js";import{loadSections as a}from"../../scripts/aem.min.js";async function l(t){if(t&&t.startsWith("/")){const i=await fetch(`${t}.plain.html`);if(i.ok){const e=document.createElement("main");e.innerHTML=await i.text();const n=(r,o)=>{e.querySelectorAll(`${r}[${o}^="./media_"]`).forEach(s=>{s[o]=new URL(s.getAttribute(o),new URL(t,window.location)).href})};return n("img","src"),n("source","srcset"),c(e),await a(e),e}}return null}async function u(t){const i=t.querySelector("a"),e=i?i.getAttribute("href"):t.textContent.trim(),n=await l(e);if(n){const r=n.querySelector(":scope .section");r&&(t.closest(".section").classList.add(...r.classList),t.closest(".fragment").replaceWith(...n.childNodes))}}export{u as default,l as loadFragment};
